---
properties:
  postgres_exporter:
    datasource_name: (( concat "postgresql://" params.pg_user ":" meta.pg_password "@" params.pg_host ":" params.pg_port "/?sslmode=" params.pg_sslmode ))
  grafana:
    prometheus:
      dashboard_files:
      - (( append ))
      - /var/vcap/jobs/postgres_dashboards/*.json
  prometheus:
    rule_files:
    - (( append ))
    - /var/vcap/jobs/postgres_alerts/*.alerts
instance_groups:
- name: prometheus
  jobs:
  - (( append ))
  - name: postgres_exporter
    release: prometheus
  - name: postgres_alerts
    release: prometheus
  - name: postgres_dashboards
    release: prometheus
